

### 04微服务时代：SOA的革命者

~~~

微服务的分而治之、化繁为简的思想是减少了业务开发复杂度，但同时引入了很多组件支撑服务，因此加大了技术复杂度。

那么我自己是有几条设计原则：
1.技术服务于架构，架构服务于业务
2.康威定律：它的意思是，有怎样的结构、规模和能力的团队，就会产生出对应结构、规模、能力的产品。这个结论不是某个团队、某个公司遇到的巧合，而是必然的演化结果。
3.架构的实施是需要对应开发模式支撑的

总结起来就是，业务规模与团队规模决定了架构的规模，一个增删查改的系统是不需要用微服务架构；使用了前后端分离，那么团队里多数是有前端工程师；由微服务架构拆分引起的量变导致质变，结合devops能更好支持运作。

另外有个小小的建议，第7点，[可靠系统完全可以由会出错的服务来组成]，从可靠性和容错性来看，是不是改成[可靠系统完全可以由容许出错的服务来组成]会更加贴切一点
~~~



**服务熔断**

**服务降级**

**服务雪崩效应**





云原声时代，也可以叫做后微服务时代

https://icyfenix.cn/methodology/forward-msa/prerequest.html



服务网格(service mesh)的边车代理模式(sidecar proxy)



上帝的归上帝，凯撒的归凯撒，业务与技术完全分离，远程与本地完全透明，我想也许这就是分布式架构最好的时代吧。



#### 分布式架构发展到服务网格后，真的是到达“最好的时代”了吗？软件架构的发展不太可能真的就此止步，你认为今天的云原生还有哪些主要矛盾，下一次软件架构的进化将会主要解决什么问题？

~~~
软件架构的发展方向，是慢慢得把与业务无关的技术问题，从软件的层面剥离出来，在硬件的基础设施之内就被悄悄解决掉，让开发人员只专注于业务，真正“围绕业务能力构建”团队与产品。

把复杂的问题交给计算机硬件解决，使得开发人员只用关注业务，让开发越来越简单，同时能够调用的计算机资源越来越强大。

这也符合奥卡姆剃刀原则：“如无必要，勿增实体“。

如果问题能让计算机自动解决，就不要麻烦人类。：）
~~~



~~~
一课一思：service mesh是软硬一体化，基础设施软件化，系统的模块被分割为业务代码和基础设施代码，团队既要负责业务的开发，也要负责基础设施代码的开发，实现开发和运维的一体化，这对团队提出了很高的要求。换句话说，云原生和网格统一了软件业务开发和生产运维，它将基础设施软件化，并为生产运维提供了工具和手段。类似于monolithic发展到micro-services，复杂性并不会消失，而是转换到另外一个维度，云原生的目的并不是消除复杂性，而是更加专业和灵活的管理软件的复杂性和基础设施的复杂性。云原生的主要矛盾可能就是面向业务的代码开发管理和面向基础设施的运维管理，后者会消耗资源，从某种角度说相当于侵占了前者的资源，因此下一次的软件架构，可能会屏蔽掉所有面向基础设施的管理内容，整体软件架构只呈现出业务的关联依赖。
~~~



**看了今天的文章，边车模式我差不多理解了。有点疑惑的是这种流量劫持，并且需要做特征分析和熔断逻辑的处理，相对来说，性能是不是会下降很多。原本只用2个实例就能满足需求，现在必须用3个实例？**

~~~
作者回复: 等后面更新到服务网格的课程时（基本是最后几节课了），会讲解边车代理的网络通讯模式。
如果只是单纯转发，其实sidecar的性能损失不会很大，因为sidecar与服务是基于回环地址通讯的，且在对网络性能极端敏感的场合甚至可以基于unix domain socket通讯，绕过网络栈。
sidecar的性能损失主要取决于要对经过的流量做多少工作，在sidecar上对流量做特征路由、认证、授权、观测等事情，自然会损失响应的性能。但是用程序手段来做这些事情也照样要耗费性能的。
~~~





# 06 | 无服务时代：“不分布式”云端系统的起点

~~~
Serverless，应该翻译为“无服务器”才合适，但现在用“无服务”已形成习惯了
~~~

**如果说微服务架构是分布式系统这条路当前所能做到的极致，那无服务架构，也许就是“不分布式”的云端系统这条路的起点。**

~~~
虽然在顺序上，我把“无服务”安排到了“微服务”和“云原生”时代之后，但它们并没有继承替代关系。我之所以要强调这一点，是为了避免你可能会从两者的名称和安排顺序的角度，产生“无服务比微服务更加先进”的错误想法。我相信，软件开发的未来，不会只存在某一种“最先进的”架构风格，而是会有多种具有针对性的架构风格并存。这才是软件产业更有生命力的形态。我同样也相信，软件开发的未来，多种架构风格将会融合互补，“分布式”与“不分布式”的边界将会逐渐模糊，两条路线将会在云端的数据中心交汇。
~~~

